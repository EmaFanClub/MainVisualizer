# MainVisualizer 主配置文件

app:
  name: "MainVisualizer"
  version: "0.1.0"
  debug: true

ingest:
  manictime:
    db_path: "${MANICTIME_DB_PATH}"
    screenshots_path: "${MANICTIME_SCREENSHOTS_PATH}"
    readonly: true
    sync_interval_seconds: 60
    batch_size: 100
    screenshot_tolerance_seconds: 30

senatus:
  ti_weights:
    visual_sensitive: 0.35
    metadata_anomaly: 0.25
    frame_diff: 0.15
    context_switch: 0.15
    uncertainty: 0.10
  # 阈值基于2356条活动数据分析优化 (2025-12-25)
  # TI分布: avg=0.4515, max=0.6438, P90=0.5455, P95=0.5610
  thresholds:
    immediate: 0.55   # P90阈值, 约10%活动触发立即分析
    batch: 0.45       # P75附近, 约25%活动进入批处理
    skip: 0.35        # P25附近, 约25%低敏感度活动跳过
  context_window_size: 10
  delay_analysis_seconds: 300

admina:
  default_provider: "qwen"  # qwen | ollama
  max_concurrent: 10
  rate_limit_per_minute: 60
  
  providers:
    qwen:
      model: "qwen3-vl-plus"
      base_url: "https://dashscope.aliyuncs.com/compatible-mode/v1"
      timeout_seconds: 60
      max_retries: 3
    ollama:
      model: "llava"
      host: "${OLLAMA_HOST:-http://localhost:11434}"
      timeout_seconds: 120
      max_retries: 2

cardina:
  fs1:
    retention_hours: 24
  fs2:
    retention_days: 90
    aggregation_time: "00:30"

storage:
  backend: "sqlite"
  sqlite:
    path: "./data/mainvisualizer.db"

output:
  initial_sync:
    lookback_days: 7
    max_length: 800
  narrative:
    style: "conversational"
    language: "zh-CN"

logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: "./logs/mv.log"
